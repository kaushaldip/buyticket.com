function loginRegister(){

   // $('.crd-btn a',$('.crd-btn')).click(function(){
												
        $("#lg-modal-frm").modal({
            overlayCss: {
                backgroundColor:"#000"
            },
            onOpen: function (dialog) {
                dialog.overlay.fadeIn('fast', function () {
                    dialog.data.hide();
                    dialog.container.fadeIn('fast', function () {
                        dialog.data.slideDown('fast');
                    });
                });
            }
        });
        $("#lg-modal-frm .submit-btn").click(function(){
            $('#lg-modal-frm form').submit();
        });
        return false;
    //});
}
function show_event_type_detail(site_url,etid)
{
    root_url = site_url;//.slice(0,-3); 
    if(etid==undefined || etid==null || etid=='' || etid=='0')
    {
        $("#loading11").show();
        $('#loading11').html('<img src='+root_url+'/assets/images/ajax_loader_small.gif>');
        $('.event_autofilled').val('');//flush initial value
        $("#loading11").html("Please select the event type.");
                    
    }else{
        $("#loading11").show();
        $('#loading11').html('<img src='+root_url+'/assets/images/ajax_loader_small.gif>');
        
        $.post(site_url+'/event/list_event_types',
            {etid:etid},
            function(data)
            {                
                data=jQuery.trim(data);
            	msg=data.split("@@");
                var result_storer=msg[0].split("=");
            	var result=jQuery.trim(result_storer[1]);
            	
            	var message_result=msg[1].split("=");
            	var message=jQuery.trim(message_result[1]);
                  
            	if(result=='error')
            	{
            		$('#loading11').html(message);
            	}
            	else if(result=='success')
            	{                                        
                    $('#loading11').hide();
                    $('.event_autofilled').val('');//flush initial value
                    
                    var length = msg.length;
                    key = null;
                    val = null;
                    
                    for (var i = 0; i < length; i++) 
                    {
                        
                        var msg_split = msg[i].split("=");
                        
                        var val = jQuery.trim(msg_split[1]);
                        var key = jQuery.trim(msg_split[0]);
                        //category@@sub_category@@sub_sub_category@@paid@@perfomer_name@@performer_type@@performer_description                        
                        $("#event_"+key).val(val);
                    }
           	   
            	}
                
            });
    }
}
function toggleDisabledPerformer()
{   
    $("#event_show_old_performer_form").toggle();
    $("#event_show_new_performer_form").toggle();
}

function change_user_status(admin_url,site_url,user_id,status)
{   
    root_url = site_url;//.slice(0,-3); 
    $('.status_show span.status_value').html('<img src='+root_url+'/assets/images/ajax_loader_small.gif>');
    
    $.post(admin_url+'/users/change_status/'+user_id,
        {status:status},
        function(data)
        {       
 
            data=jQuery.trim(data);
        	msg=data.split("@@");
            var result_storer=msg[0].split("=");
        	var result=jQuery.trim(result_storer[1]);
        	
        	var message_result=msg[1].split("=");
        	var message=jQuery.trim(message_result[1]);
            
            var key_result = msg[2].split("=");
            var newkey=jQuery.trim(key_result[1]);
              
        	if(result=='error')
        	{
        	          	   
        	   $('.status_show span.status_value').html(message);
        	}
        	else if(result=='success')
        	{                 
        	   $('.status_show div').removeClass();
               $('.status_show div').addClass(newkey); 
               $('.status_show span.status_value').html(message);
        	}
            
        });
    
}
function change_event_status(admin_url,site_url,id,status)
{   
    if(confirm("Are you sure to change?"))
    {
        root_url = site_url;//.slice(0,-3); 
        $('#event_status'+id).html('<img src='+root_url+'assets/images/ajax_loader_small.gif>');
        $("#event_active_number").html('<img src='+root_url+'assets/images/ajax_loader_small.gif>');
        $.post(admin_url+'/event/change_status/'+id,
            {status:status},
            function(data)
            {       
     
                data=jQuery.trim(data);
            	msg=data.split("@@");
                var result_storer=msg[0].split("=");
            	var result=jQuery.trim(result_storer[1]);
            	
            	var message_result=msg[1].split("=");
            	var message=jQuery.trim(message_result[1]);
                
                var key_result = msg[2].split("=");
                var newkey=jQuery.trim(key_result[1]);
                
                var active_result = msg[3].split("=");
                var active=jQuery.trim(active_result[1]);
                 
                  
            	if(result=='error')
            	{        	          	   
            	   $('#event_status'+id).html(message);
            	}
            	else if(result=='success')
            	{
            	   htm = "<div class='"+newkey+"' title='Status: "+message+"'>"+message+"</div>";
                   if(message=='CLOSED'){
                        $('#event_publish'+id).html(htm);                    
                   }
                   $('#event_status'+id).html(htm);
                   $("#event_active_number").html(active);
            	}
                
            });     
    }else{
        return false;
    }
    
    
}

function change_event_publish(admin_url,site_url,id,status)
{   
    if(confirm("Are you sure to change?"))
    {
        root_url = site_url;//.slice(0,-3); 
        $('#event_publish'+id).html('<img src='+root_url+'assets/images/ajax_loader_small.gif>');
        $("#event_active_number").html('<img src='+root_url+'assets/images/ajax_loader_small.gif>');
        $.post(admin_url+'/event/change_publish/'+id,
            {status:status},
            function(data)
            {       
     
                data=jQuery.trim(data);
            	msg=data.split("@@");
                var result_storer=msg[0].split("=");
            	var result=jQuery.trim(result_storer[1]);
            	
            	var message_result=msg[1].split("=");
            	var message=jQuery.trim(message_result[1]);
                
                var key_result = msg[2].split("=");
                var newkey=jQuery.trim(key_result[1]);
                
                var active_result = msg[3].split("=");
                var active=jQuery.trim(active_result[1]);
                 
                  
            	if(result=='error')
            	{        	          	   
            	   $('#event_publish'+id).html(message);
            	}
            	else if(result=='success')
            	{
            	   htm = "<div class='"+newkey+"' title='Status: "+message+"'>"+message+"</div>";
                   if(message=='CLOSED'){
                        $('#event_status'+id).html(htm);                    
                   }
                   
                   $('#event_publish'+id).html(htm);
                   $("#event_active_number").html(active);
            	}
                
            });     
    }else{
        return false;
    }
    
    
}
function enable_user_login(admin_url,site_url,id)
{   
    if(confirm("Are you sure to enable user login?"))
    {
        root_url = site_url;//.slice(0,-3); 
        $('#user_td'+id).html('<img src='+root_url+'/assets/images/ajax_loader_small.gif>');        
        $.post(admin_url+'/users/enable_user_login/'+id,
            {status:status},
            function(data)
            {       
     
                result=jQuery.trim(data);
                  
            	if(result=='error')
            	{        	          	   
            	   $('#user_td'+id).html("some thing went wrong!");
            	}
            	else if(result=='success')
            	{
            	   htm = "<button class=\"mws-button red small\" onclick=\"disable_user_login('"+admin_url+"','"+site_url+"', '"+id+"');\">Disable Login</button>";
                   
                   $('#user_td'+id).html(htm);                   
            	}
                
            });     
    }else{
        return false;
    }
    
    
}

function disable_user_login(admin_url,site_url,id)
{   
    if(confirm("Are you sure to disable user login?"))
    {
        root_url = site_url;//.slice(0,-3); 
        $('#user_td'+id).html('<img src='+root_url+'/assets/images/ajax_loader_small.gif>');        
        $.post(admin_url+'/users/disable_user_login/'+id,
            {status:status},
            function(data)
            {       
     
                result=jQuery.trim(data);
                  
            	if(result=='error')
            	{        	          	   
            	   $('#user_td'+id).html("some thing went wrong!");
            	}
            	else if(result=='success')
            	{
            	   htm = "<button class=\"mws-button green small\" onclick=\"enable_user_login('"+admin_url+"','"+site_url+"', '"+id+"');\">Enable Login</button>";
                   
                   $('#user_td'+id).html(htm);                   
            	}
                
            });     
    }else{
        return false;
    }
    
    
}
function change_user_to_organizer(admin_url,site_url,id)
{
    root_url = site_url;//.slice(0,-3);
    $('#user_organizer_'+id).html('<img src='+root_url+'/assets/images/ajax_loader_small.gif>');    
    $.post(admin_url+'/users/change_user_to_organizer',
        {id:id},
        function(data)
        {   
            data=jQuery.trim(data);
        	msg=data.split("@@");
            var result_storer=msg[0].split("=");
        	var result=jQuery.trim(result_storer[1]);
        	
        	var message_result=msg[1].split("=");
        	var message=jQuery.trim(message_result[1]);
              
        	if(result=='error')
        	{        	          	   
        	   $('#user_organizer_'+id).html(message);
        	}
        	else if(result=='success')
        	{        	   
               htm = "<div title='Organizer: Yes' class='status-active'>&nbsp;</div>";
               $('#user_organizer_'+id).html(htm);               
        	}
            
        });
}

function reset_password(admin_url, site_url, uid, div_id)
{
    //alert(div_id);
    if(confirm("Do you want to reset password?"))
    {
        root_url = site_url;//.slice(0,-3);
        $("#"+div_id).html('<img src='+root_url+'/assets/images/ajax_loader_small.gif>');
        $.post(admin_url+'/users/reset_password',
        {uid:uid},
        function(data)
        {   
            data=jQuery.trim(data);
        	msg=data.split("@@");
            var result_storer=msg[0].split("=");
        	var result=jQuery.trim(result_storer[1]);
        	
        	var message_result=msg[1].split("=");
        	var message=jQuery.trim(message_result[1]);
              
        	if(result=='error')
        	{        	          	   
        	   $("#"+div_id).html(message);
        	}
        	else if(result=='success')
        	{               
               $("#"+div_id).html(message);               
        	}
            
        });  
    }else
    {
        return false;
    }
    
}

function loginajax(site_url)
{
    var email  = $('#email_login').val();
    var pw = $("#password_login").val();
    var email_empty_err_msg = $("#email_empty_err_msg").html();
    if(email=='' || pw==''){
        $("#load_error").html("<div  class=\"alert alert-error\"><a class=\"close\" data-dismiss=\"alert\">&times;</a>"+email_empty_err_msg+"</div>");
        return false;
    }
    //$("#"+div_id).html('<img src='+site_url+'/assets/images/ajax_loader_small.gif>');
    $.post(site_url+'event/loginajaxaccess',
    {email:email,password:pw},
    function(data)
    {   
        //alert(data);
        data=jQuery.trim(data);
    	msg=data.split("@@");
        var result_storer=msg[0].split("=");
    	var result=jQuery.trim(result_storer[1]);
    	
    	var message_result=msg[1].split("=");
    	var message=jQuery.trim(message_result[1]);
          
    	if(result=='error')
    	{        	          	   
    	   $("#load_error").html("<div  class=\"alert alert-error\"><a class=\"close\" data-dismiss=\"alert\">&times;</a>"+message+"</div>");
    	}
    	else if(result=='success')
    	{               
            //$("#login_result").html("<div class=\"controls\" style=\"float: right;\">Hi, <strong>"+message+"</strong>.</div>")       
            location.reload();      
    	}
        
    });
}

function logoutajax(site_url)
{
    $.post(site_url+'event/logoutajaxaccess',
    {},
    function(data)
    {   
        location.reload();
        
    });
}

function getmyticket(site_url,ticket_order_id)
{
    loaderOn();
    $.post(site_url+'myticket/getmyticket',
    {ticket_order_id:ticket_order_id},
    function(data)
    {   
        //alert(data);
        if(data=='error')
        {
            
            msg4 = "Can not get your ticket right now. Processing is been conducted right now. Please try later again.";
            //alert(msg4)
            $("#mainModal #mainModalBody").html(msg4);
            $("#mainModal").modal("show");
            loaderOff();
            return false;
        }else{            
            location.reload();    
        }
    });
}

function cancelOrder(site_url,ticket_order_id, ticket_qty, ticket_id)
{
    loaderOn();
	msg = "Do you want to cancel your order?";
    if(confirm(msg))
    {
        $.post(site_url+'myticket/cancelOrder',
        {ticket_order_id:ticket_order_id,ticket_qty:ticket_qty, ticket_id:ticket_id},
        function(data)
        {   
            //alert(data);return false;
            if(data=='error')
            {
                
                
				msg1 = "Can not cancel your order right now.";
                //alert(msg1);
                $("#mainModal #mainModalBody").html(msg1);
                $("#mainModal").modal("show");
                
                return false;
            }else if(data=='failure'){
                
				msg2 = "Your order has been proceed. Do you want to refund?";
                if(confirm(msg2))
                {
                    refundOrder(site_url,ticket_order_id, ticket_qty, ticket_id);
                }else{
                    
					msg3 = "Refund was cancelled.";
                    //alert(msg3);
                    $("#mainModal #mainModalBody").html(msg3);
                    $("#mainModal").modal("show");    
                }                
                return false;
            }else{
                
				msg4 = "Successfully cancelled order. Thank you.";
                $("#mainModal #mainModalBody").html(msg4);
                $("#mainModal").modal("show");
                location.reload();    
            }
        });
        loaderOff();
        return false;
    }else{
        loaderOff();
        return false;
    }
}
function refundOrder(site_url,ticket_order_id, ticket_qty, ticket_id)
{
    $.post(site_url+'myticket/refundOrder',
    {ticket_order_id:ticket_order_id,ticket_qty:ticket_qty, ticket_id:ticket_id},
    function(data)
    {
        
        $("#refund_block"+ticket_order_id).show().html('<div class="alert alert-warning"><a class="close" data-dismiss="alert">&times;</a>'+data+'</div>');
    });
    return false;
}

function printTicket(site_url, ticket_order_id)
{
    url = site_url+"myticket/printTicket/"+ticket_order_id;
    
    newwindow=window.open(url,'name','resizable=yes,height=600,width=800,scrollbars=1,scroll=yes');
    if (window.focus) {newwindow.focus()}
   
}

function pdfgen(site_url, ticket_order_id)
{
      window.location = site_url+"myticket/pdf/"+ticket_order_id;    
}

function add_referral_url(site_url)
{  
    loaderOn();
    $("#add_referral_url_response").html('<img src='+site_url+'assets/images/ajax_loader_small.gif>');
    $.post(site_url+'affiliate/add_referral_url',
    {},
    function(data)
    {
        data=jQuery.trim(data);
    	msg=data.split("@@");
        var result_storer=msg[0].split("=");
    	var result=jQuery.trim(result_storer[1]);
    	
    	var message_result=msg[1].split("=");
    	var message=jQuery.trim(message_result[1]);
        
        if(result=='error')
        {
            $("#add_referral_url_response").html('<div class="alert alert-danger"><a class="close" data-dismiss="alert">&times;</a>'+message+'</div>')
            return false;
                        
        }else{
            
            var message_result=msg[1].split("=");
            var url = jQuery.trim(message_result[1]);
            
            var urlId_result = msg[2].split("=");
            var urlId = jQuery.trim(urlId_result[1]);
        
            html = '<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username="></script>';
            html += "<li id='url_block_"+urlId+"' class='just_added'><div class='url_list_block'><strong>"+site_url+"/reff/"+url+"</strong><label style='width: auto;'> <a class='addthis_button'	addthis:url='"+site_url+"/reff/"+url+"' addthis:title='' href='#'> <img src='http://s7.addthis.com/static/btn/sm-share-en.gif' width='83' height='16' alt='Bookmark and Share' style='border:0'/> </a> &nbsp; <span onclick='remove_referral_url(\""+site_url+"\", \""+urlId+"\")'>Remove</span></label></div>";
            html += '<table class="table table-striped"><thead><tr><th>Page Views</th><th>Total Register</th><th>Total Paid Revenue</th><th>Total Paid Earnings</th><th>Unpaid Revenue</th><th>Unpaid Earning</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0.00</td><td>0.00</td><td>0.00</td><td>0.00</td></tr></tbody></table>';
            
            html +="</li>";    
            $("ul#referral_url_lists").prepend(html);
            $("#add_referral_url_response").html('<div class="alert alert-success no-margin-bottom"><a class="close" data-dismiss="alert">&times;</a>'+result+'</div>');
        }
        loaderOff();
    });
}

function remove_referral_url(site_url,url_id)
{    
    loaderOn();
	msg = "Do you want to remove referral url?";
    if(confirm(msg))
    {
        root_url = site_url;
        $("#add_referral_url_response").html('<img src='+root_url+'assets/images/ajax_loader_small.gif>');
        $.post(site_url+'affiliate/remove_referral_url',
        {url_id:url_id},
        function(data)
        {
            data=jQuery.trim(data);
        	msg=data.split("@@");
            var result_storer=msg[0].split("=");
        	var result=jQuery.trim(result_storer[1]);
        	
        	var message_result=msg[1].split("=");
        	var message=jQuery.trim(message_result[1]);
            
            if(result=='error')
            {               
                $("#add_referral_url_response").html('<div class="alert alert-danger no-margin-bottom"><a class="close" data-dismiss="alert">&times;</a>'+message+'</div>');
                return false;
                            
            }else{
                $("li#url_block_"+url_id).hide(600);
                $("#add_referral_url_response").html('<div class="alert alert-success no-margin-bottom"><a class="close" data-dismiss="alert">&times;</a>'+message+'</div>');
            }
            loaderOff();
        });
    }else{
        loaderOff();
        return false;
    }
}

function join_affiliate_event(site_url,event_id,organizer_id,affiliate_rate)
{
    loaderOn();
    if(confirm("Do you want to join this event?"))
    {
        $("#join_a_event_"+event_id).html('<img src='+site_url+'assets/images/ajax_loader_small.gif>');
        $.post(site_url+'affiliate/join_affiliate_event',
        {event_id:event_id,organizer_id:organizer_id,affiliate_rate:affiliate_rate},
        function(data)
        {
            data=jQuery.trim(data);
        	msg=data.split("@@");
            var result_storer=msg[0].split("=");
        	var result=jQuery.trim(result_storer[1]);
        	
        	var message_result=msg[1].split("=");
        	var message = jQuery.trim(message_result[1]);
            
            if(result=='error')
            {
                $("#mainModal #mainModalBody").html(message);
                $("#mainModal").modal("show");
                window.location = site_url+"/affiliate/event_list";
                return false;
                            
            }else{
                var link_result=msg[2].split("=");                
                var link = "<a href='"+site_url+"/affiliate/ea_program"+"'>"+jQuery.trim(link_result[1])+"</a>";
                $("#join_a_event_"+event_id).html(message+" "+link);                
            }
            
            loaderOff();
        });
    }else{
        loaderOff();
        return false;
    }
}
function paypal_order(url)
{
    window.location = url; 
}

function showPaymentDetail(){
    $.ajax({
        url: site_url+'affiliate/payments_detail',
        type:'POST',
        data:'',
        success:function(msg){
            $("#mainModal #mainModalLabel").html("Payment Details");
            $("#mainModal #mainModalBody").html(msg);
            $("#mainModal").modal("show");
        }
    });    
}

function showAttendees(url)
{
    loaderOn();
    $.ajax({
        url: url,
        type:'POST',
        data:'',
        success:function(msg){
            $("#mainModal #mainModalLabel").html("Show Attendees");
            $("#mainModal #mainModalBody").html(msg);
            $("#mainModal").modal("show");
            loaderOff();
        }
    });    
}

function showRefundPolicyOfEvent(eventID){
    $.ajax({
        url: site_url+'home/refund_policy/'+eventID,
        type:'POST',
        data:'',
        success:function(msg){
            $("#mainModal #mainModalLabel").html("Refund Policy Details");
            $("#mainModal #mainModalBody").html(msg);
            $("#mainModal").modal("show");
        }
    });    
}

function pressed(that){
    return false;
}

function showURLInModal(that,url)
{
    var title = $(that).attr("title");
    loaderOn();
    $.ajax({
        url: url,
        type:'POST',
        data:'',
        success:function(msg){
            $("#mainModal #mainModalLabel").html(title);
            $("#mainModal #mainModalBody").html(msg);
            $("#mainModal").modal("show");
            loaderOff();
        }
    });    
}